<h1>All Tweets</h1>

<div>
<button onclick="window.location.href='/logout'"> Logout </button>
</div>

<% @tweets.each do |tweet| %>
  <h5>Author: <a href="profile/<%= tweet.user.id%>"><%= tweet.user.name %></a></h5>
  <h4><%= tweet.title %></h4>

  <p>"<%= tweet.body %>"</p>
  <div>
<% like = current_user.likes.find_by(tweet: @tweet) if !current_user.nil? %>
<% if like.nil? %>
  <form action="/likes" method="post">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
    <input type="hidden" name="like[tweet_id]" value="<%= tweet.id %>">
    <input type="hidden" name="like[tweet_type]" value="<%= tweet.class.to_s %>">
    <input type="submit" value="Like">
  </form>
<% else %>
  <form action="<%= like_path(like) %>" method="post">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
    <input type="hidden" name="_method" value="DELETE">
    <input type="submit" value="Unlike">
  </form>
<% end %>
</div>
    <% if tweet.user_id == current_user.id %>

    <%= link_to "Delete tweet", tweet_path(tweet), data: {turbo_method: :delete} %>
    <div>
    <%= link_to "Edit tweet", edit_tweet_path(tweet) %>
    </div>
    <% end %>
<% end %>

<div>
<%= link_to "New tweet", new_tweet_path %>
</div>

<div>
<%= button_to "Followed Users Tweets", posts_path,  method: :get %>
</div>
